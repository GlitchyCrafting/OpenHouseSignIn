<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SICTC Open House Sign Up</title>
    <meta name="description" content="Please provide your information">
    <link href="favicon.png" rel="shortcut icon">
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
  </head>
  <body>
    <header>
      <div class="header-top">
          <img src="footerLogo.png" alt="Website Logo" class="center">
          <h1>Open House Sign Up</h1>
      </div>
  </header>
    <form name="submit-to-google-sheet">
      <input name="personalEmail" type="email" placeholder="Personal Email" required>
      <input name="emailAddress" type="email" id="emailInput" placeholder="School Email" required>
      <input name="firstName" type="text" placeholder="First Name" required>
      <input name="preferedName" type="text" placeholder="Prefered Name or Nickname">
      <input name="lastName" type="text" placeholder="Last Name" required>
      <select name="school"placeholder="School" id="schoolSelect" required>
        <option disabled selected value>Select a School</option>
        <option value="AIS">AIS</option>
        <option value="Boonville">Boonville High School</option>
        <option value="Bosse">Bosse High School</option>
        <option value="Castle">Castle High School</option>
        <option value="Central">Central High School</option>
        <option value="ECS">Evansville Christian School</option>
        <option value="EDS">Evansville Day School</option>
        <option value="EVSC Virtual Academy">EVSC Virtual Academy</option>
        <option value="Gibson Southern">Gibson Southern High School</option>
        <option value="Harrison">Harrison High School</option>
        <option value="Harwood">Harwood Career Preparatory High School</option>
        <option value="Indiana Connections">Indiana Connections</option>
        <option value="Mater Dei">Mater Dei High School</option>
        <option value="Memorial">Memorial High School</option>
        <option value="Mt. Vernon">Mt. Vernon High School</option>
        <option value="New Horizon">New Horizon Christian Academy</option>
        <option value="NTI">New Tech Institute</option>
        <option value="North">North High School</option>
        <option value="North Posey">North Posey High School</option>
        <option value="Princeton">Princeton High School</option>
        <option value="Reitz">Reitz High School</option>
        <option value="Signature">Signature School</option>
        <option value="South Spencer">South Spencer</option>
        <option value="Tecumseh">Tecumseh High School</option>
        <option value="Wood Memorial">Wood Memorial High School</option>
        <option value="Home School">Home School</option>
        <option value="Other">Other</option>
      </select>
      <fieldset name="reference">
        <legend name="reference">How did you find out about SICTC?</legend>

        <input type="checkbox" id="counselor" name="where" value="counselor"> High School Counselor
        <label for="counselor"></label>

        <input type="checkbox" id="posters" name="where" value="posters"> Informational Posters
        <label for="posters"></label> 

        <input type="checkbox" id="facebook" name="where" value="facebook"> Facebook
        <label for="facebook"></label>

        <input type="checkbox" id="books" name="where" value="instagram"> Instagram
        <label for="instagram" ></label>

        <input type="checkbox" id="website" name="where" value="website"> SICTC Website
        <label for="website" ></label>

        <input type="checkbox" id="relative" name="where" value="relative"> Friend or Family Member
        <label for="relative" ></label>

        <input type="checkbox" id="alumni" name="where" value="alumni"> SICTC Alumni
        <label for="alumni" ></label>

        <input type="checkbox" id="student" name="where" value="student"> Current SICTC Student
        <label for="student"></label>

        <input type="checkbox" id="meeting" name="where" value="meeting"> SICTC Meeting at High School
        <label for="meeting" ></label>

        <div>
          <input type="checkbox" id="other" name="where" value="other"> Other
          <input type="text" id="otherReference" name="otherReference" placeholder="">
        </div>
    </fieldset>
    <div id="space">
    <!--<input type="text" name="id" placeholder="Three Digit ID" required>-->
  </div>
    <input type="hidden" id="hiddenInput" name="reference">
    <input type="hidden" name="schoolEmail" id="emailPut">

    <button type="submit">Send</button>
     
    </form>
    <footer>
      <a href="https://sictc.evscschools.com/"><img src="headerLogo.svg" alt="Footer Logo"></a> 
      <p>Maintained & Built by SICTC<br>Computer Science Software Development</p></div>
  </footer>
  </body>
</html>





<script src="script.js"></script> 
<script>
  const scriptURL = 'https://script.google.com/macros/s/AKfycbxDDFN7KkIYHdzTk6Vi3ZPvri_3qh2_Biexf5ygwpiXPQjjuH1NXVBxaZ5E8IW2tIYETg/exec'
  const form = document.forms['submit-to-google-sheet']
  // Concatenate the selected interests into a string
  // Get the selected interests
  form.addEventListener('submit', function(event) {
   
    event.preventDefault()

    

    var dropdown = document.getElementById("schoolSelect");
    var selectedSchool = dropdown.value;

    //EVSC
    if (selectedSchool === "Bosse" || selectedSchool === "Central" || selectedSchool === "Harrison" || selectedSchool === "AIS" || selectedSchool === "Harwood" || selectedSchool === "EVSC Virtual Academy" || selectedSchool === "North" || selectedSchool === "Reitz" || selectedSchool === "NTI"){
      var emailInput = document.getElementById("emailInput");
      var emailValue = emailInput.value;
      var indexOfAt = emailValue.indexOf('@');
      var substring = emailValue.substring(0, indexOfAt + 1);
      var finalEmail = substring + "stu.evsck12.com"
      document.getElementById("emailPut").value = finalEmail
    }
    else if (selectedSchool === "Castle" || selectedSchool === "Tecumseh" || selectedSchool === "Boonville"){
      var emailInput = document.getElementById("emailInput");
      var emailValue = emailInput.value;
      var indexOfAt = emailValue.indexOf('@');
      var substring = emailValue.substring(0, indexOfAt + 1);
      var finalEmail = substring + "warrick.k12.in.us"
      document.getElementById("emailPut").value = finalEmail
    }
    else{
      var emailInput = document.getElementById("emailInput");
      var emailValue = emailInput.value;
      document.getElementById("emailPut").value = emailValue
    }

    




    // Get all checkboxes with the name "interests"
    var checkboxes = document.querySelectorAll('input[name="where"]');
    
    // Filter checked checkboxes and get their values
    var selectedInterests = [];
    checkboxes.forEach(function(checkbox) {
        if (checkbox.checked) {
            selectedInterests.push(checkbox.value);
        }
    });

    // Concatenate the selected interests into a string
    let interestsString = selectedInterests.join('-');

    
    console.log(interestsString)
    // Display the concatenated string
    document.getElementById("hiddenInput").value = interestsString;
    

    // alert('Selected Interests: ' + interestsString);
    // event.currentTarget.submit()
    fetch(scriptURL, { method: 'POST', body: new FormData(form)})
      .then(response => console.log('Success!', response))
      .catch(error => console.error('Error!', error.message))
    event.currentTarget.reset();
  })
  //refresh screen
  
</script>
